# Decision AI - Sistema de Recrutamento

[![Tests](https://img.shields.io/badge/tests-passing-brightgreen)]()
[![Python](https://img.shields.io/badge/python-3.11-blue)]()
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104.1-green)]()
[![Docker](https://img.shields.io/badge/docker-ready-blue)]()
[![License](https://img.shields.io/badge/license-MIT-blue)]()

Um sistema de IA para recrutamento e sele√ß√£o que utiliza machine learning para fazer match entre candidatos e vagas, desenvolvido para o Tech Challenge 5 da FIAP.

## üìã √çndice

- [Vis√£o Geral](#-vis√£o-geral)
- [Funcionalidades](#-funcionalidades)
- [Arquitetura](#-arquitetura)
- [Instala√ß√£o](#-instala√ß√£o)
- [Uso R√°pido](#-uso-r√°pido)
- [API Endpoints](#-api-endpoints)
- [Monitoramento](#-monitoramento)
- [Testes](#-testes)
- [Docker](#-docker)
- [Deploy](#-deploy)
- [Estrutura do Projeto](#-estrutura-do-projeto)
- [Contribui√ß√£o](#-contribui√ß√£o)

## üéØ Vis√£o Geral

O Decision AI √© uma solu√ß√£o completa de machine learning para automatizar o processo de recrutamento e sele√ß√£o. O sistema analisa perfis de candidatos e requisitos de vagas para calcular a probabilidade de match, fornecendo recomenda√ß√µes baseadas em dados.

### Principais Caracter√≠sticas

- **IA Avan√ßada**: Utiliza algoritmos de machine learning (Random Forest, Gradient Boosting, etc.) treinados com dados reais
- **API RESTful**: Interface FastAPI com documenta√ß√£o autom√°tica em portugu√™s
- **Dados Reais**: Processamento de 45.071 candidatos reais e hist√≥rico de processos seletivos
- **Engenharia de Features**: Extra√ß√£o autom√°tica de caracter√≠sticas relevantes dos dados reais
- **Monitoramento**: Detec√ß√£o de drift de dados com Evidently AI
- **Containeriza√ß√£o**: Deploy com Docker e Docker Compose
- **Testes Automatizados**: Cobertura completa com pytest
- **Fallback Inteligente**: Gera√ß√£o autom√°tica de dados sint√©ticos quando dados reais n√£o est√£o dispon√≠veis
- **Multil√≠ngue**: Sistema com logs e coment√°rios em portugu√™s brasileiro

## ‚ú® Funcionalidades

### Funcionalidades Principais

- ‚úÖ **Predi√ß√£o de Compatibilidade**: Calcula probabilidade de compatibilidade candidato-vaga baseada em dados reais
- ‚úÖ **An√°lise de Fatores**: Identifica quais aspectos influenciam a compatibilidade (habilidades, experi√™ncia, localiza√ß√£o, sal√°rio)
- ‚úÖ **Recomenda√ß√µes**: Fornece sugest√µes baseadas na an√°lise de 45k candidatos reais
- ‚úÖ **Processamento de Dados Reais**: Extra√ß√£o autom√°tica de features de applicants.json, prospects.json, jobs.json
- ‚úÖ **Valida√ß√£o de Dados**: Valida√ß√£o robusta com Pydantic adaptada para estrutura real
- ‚úÖ **Registro Estruturado**: Logs detalhados em portugu√™s brasileiro para auditoria
- ‚úÖ **Fallback Inteligente**: Sistema funciona com dados sint√©ticos quando dados reais n√£o est√£o dispon√≠veis

### Monitoramento e Observabilidade

- ‚úÖ **Health Check**: Endpoint para verifica√ß√£o de sa√∫de do sistema
- ‚úÖ **M√©tricas**: Estat√≠sticas de uso e performance
- ‚úÖ **Drift Detection**: Monitoramento de mudan√ßas nos dados
- ‚úÖ **Relat√≥rios**: Dashboards visuais com Evidently

### DevOps e Qualidade

- ‚úÖ **Pronto para CI/CD**: Configura√ß√£o para GitHub Actions
- ‚úÖ **Containeriza√ß√£o**: Docker multi-est√°gio para produ√ß√£o
- ‚úÖ **Testes**: Cobertura completa com pytest
- ‚úÖ **An√°lise de C√≥digo**: Black e Ruff para qualidade de c√≥digo
- ‚úÖ **Tipagem Est√°tica**: Tipagem est√°tica completa

## üèóÔ∏è Arquitetura

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend/     ‚îÇ    ‚îÇ   Aplica√ß√£o     ‚îÇ    ‚îÇ   Pipeline ML   ‚îÇ
‚îÇ   Postman       ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   FastAPI       ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   (sklearn)     ‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ                        ‚îÇ
                                ‚ñº                        ‚ñº
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ   Monitoramento ‚îÇ    ‚îÇ Armazenamento   ‚îÇ
                       ‚îÇ   (Evidently)   ‚îÇ    ‚îÇ   de Dados      ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ   (CSV/Joblib)  ‚îÇ
                                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Stack Tecnol√≥gica

- **Backend**: Python 3.11, FastAPI, Uvicorn
- **ML**: scikit-learn, pandas, numpy
- **Monitoramento**: Evidently AI, Loguru
- **Valida√ß√£o**: Pydantic
- **Testes**: pytest, httpx
- **Containeriza√ß√£o**: Docker, Docker Compose
- **Qualidade**: Black, Ruff, MyPy

## üìä Dados

### Dados Reais (Produ√ß√£o)
O sistema foi completamente adaptado para trabalhar com dados reais da Decision:
- **applicants.json**: 45.071 candidatos reais com informa√ß√µes completas (194MB)
- **prospects.json**: Hist√≥rico detalhado de candidaturas e status de processos seletivos
- **jobs.json**: Vagas reais com requisitos t√©cnicos e comportamentais detalhados

### Estrutura dos Dados Reais

#### Candidatos (applicants.json)
- **Informa√ß√µes Pessoais**: Nome, idade, localiza√ß√£o, contatos
- **Forma√ß√£o Acad√™mica**: Cursos, institui√ß√µes, per√≠odos
- **Experi√™ncia Profissional**: Empresas, cargos, per√≠odos, responsabilidades
- **Habilidades T√©cnicas**: Linguagens de programa√ß√£o, frameworks, ferramentas
- **Habilidades Comportamentais**: Soft skills identificadas
- **Prefer√™ncias**: Modalidade de trabalho, expectativa salarial, disponibilidade

#### Vagas (jobs.json)
- **Requisitos T√©cnicos**: Tecnologias obrigat√≥rias e desej√°veis
- **Experi√™ncia**: N√≠vel de senioridade exigido
- **Localiza√ß√£o**: Cidade, estado, modalidade (presencial/remoto/h√≠brido)
- **Benef√≠cios**: Pacote de benef√≠cios oferecido
- **Descri√ß√£o**: Responsabilidades e desafios da posi√ß√£o

#### Hist√≥rico de Processos (prospects.json)
- **Candidaturas**: Relacionamento candidato-vaga
- **Status**: Etapas do processo seletivo
- **Feedback**: Avalia√ß√µes e coment√°rios dos recrutadores
- **Resultados**: Aprova√ß√µes, reprova√ß√µes e motivos

‚ö†Ô∏è **Nota**: Os arquivos de dados reais n√£o est√£o inclu√≠dos no reposit√≥rio devido ao tamanho (>100MB). Para usar o sistema:

1. **Obtenha os dados reais** e coloque na pasta `data/`
2. **Execute o treinamento**: `python src/train.py`
3. **Inicie a API**: `uvicorn app.main:app --reload`

### Dados Sint√©ticos (Fallback)
Se os dados reais n√£o estiverem dispon√≠veis, o sistema gera dados sint√©ticos automaticamente que simulam a estrutura real:
- **Candidatos**: Informa√ß√µes pessoais, educa√ß√£o, experi√™ncia, habilidades t√©cnicas e comportamentais
- **Vagas**: Requisitos t√©cnicos, localiza√ß√£o, sal√°rio, modalidade de trabalho
- **Matches**: Hist√≥rico de compatibilidade entre candidatos e vagas baseado em crit√©rios reais

### Processamento e Features
O sistema extrai automaticamente features relevantes dos dados reais:
- **Match de Habilidades**: Compatibilidade entre skills do candidato e requisitos da vaga
- **Experi√™ncia**: An√°lise de senioridade e tempo de experi√™ncia
- **Localiza√ß√£o**: Compatibilidade geogr√°fica e prefer√™ncias de trabalho remoto
- **Sal√°rio**: Alinhamento entre expectativa e oferta
- **Perfil Comportamental**: An√°lise de soft skills e fit cultural

## üöÄ Instala√ß√£o

### Pr√©-requisitos

- Python 3.11+
- Docker (opcional)
- Make (opcional, mas recomendado)

### Instala√ß√£o Local

```bash
# Clone o reposit√≥rio
git clone <repository-url>
cd tech-challenger-5

# Setup completo (recomendado)
make setup

# Ou instala√ß√£o manual
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# ou
venv\Scripts\activate     # Windows
pip install -r requirements.txt
```

## ‚ö° Uso R√°pido

### Op√ß√£o 1: Usando Make (Recomendado)

```bash
# Setup, treinamento e execu√ß√£o em um comando
make quick-start

# Ou passo a passo
make setup      # Configurar ambiente
make train      # Treinar modelo
make api        # Executar API
```

### Op√ß√£o 2: Comandos Manuais

```bash
# 1. Processar dados reais (se dispon√≠veis) ou gerar sint√©ticos
python -m src.data

# 2. Treinar modelo com dados reais ou sint√©ticos
python -m src.train

# 3. Executar API
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

### Op√ß√£o 3: Treinamento R√°pido com Dados Reais

```bash
# Script otimizado para dados reais (se dispon√≠veis)
python quick_train.py
```

### Op√ß√£o 4: Docker

```bash
# Build e execu√ß√£o
make docker-build
make docker-run

# Ou usando docker-compose diretamente
docker-compose up -d
```

Ap√≥s a execu√ß√£o, a API estar√° dispon√≠vel em:
- **API**: http://localhost:8000
- **Documenta√ß√£o**: http://localhost:8000/docs
- **Health Check**: http://localhost:8000/health

## üì° Endpoints da API

### Principais Endpoints

| M√©todo | Endpoint | Descri√ß√£o |
|--------|----------|----------|
| GET | `/` | P√°gina inicial com informa√ß√µes da API |
| GET | `/health` | Health check do sistema |
| POST | `/predict` | Predi√ß√£o de match candidato-vaga |
| GET | `/metrics` | M√©tricas do sistema |
| GET | `/drift-report` | Relat√≥rio de drift de dados |
| GET | `/docs` | Documenta√ß√£o interativa (Swagger) |

### Exemplo de Uso

#### Predi√ß√£o de Match

```bash
curl -X POST "http://localhost:8000/predict" \
     -H "Content-Type: application/json" \
     -d '{
       "candidate": {
         "age": 28,
         "education_level": "bachelor",
         "years_experience": 5,
         "skills": ["python", "machine learning", "sql"],
         "previous_companies": 2,
         "salary_expectation": 85000,
         "location": "S√£o Paulo",
         "remote_work": true,
         "availability_days": 30
       },
       "job": {
         "required_experience": "mid",
         "required_skills": ["python", "sql", "machine learning"],
         "salary_range_min": 75000,
         "salary_range_max": 95000,
         "location": "S√£o Paulo",
         "remote_allowed": true,
         "urgency_days": 45
       }
     }'
```

#### Resposta Esperada

```json
{
  "match_probability": 0.85,
  "match_label": "good_match",
  "confidence": 0.92,
  "factors": {
    "skills_match": 0.9,
    "experience_match": 0.8,
    "salary_fit": 0.85,
    "location_compatibility": 1.0
  },
  "recommendation": "Excelente compatibilidade - fortemente recomendado para entrevista",
  "timestamp": "2024-01-15T10:30:00"
}
```

### Cole√ß√£o Postman

Importe o arquivo `postman_collection.json` no Postman para testar todos os endpoints com exemplos pr√©-configurados.

## üìä Monitoramento

### Drift Detection

O sistema monitora automaticamente mudan√ßas nos padr√µes de dados:

```bash
# Gerar relat√≥rio de drift
make monitor

# Ou manualmente
python -m monitor.generate_report \
  --reference-data data/sample_candidates.csv \
  --predictions-log logs/predictions.csv
```

### M√©tricas Dispon√≠veis

- **Total de Predi√ß√µes**: N√∫mero total de predi√ß√µes realizadas
- **Probabilidade M√©dia**: M√©dia das probabilidades de match
- **Predi√ß√µes 24h**: Predi√ß√µes nas √∫ltimas 24 horas
- **Drift Detectado**: Status de detec√ß√£o de drift
- **Sa√∫de do Sistema**: Status geral do sistema

### Logs

Todos os logs s√£o estruturados e salvos em:
- `logs/api.log` - Logs da aplica√ß√£o
- `logs/predictions.csv` - Log de todas as predi√ß√µes

## üß™ Testes

### Executar Testes

```bash
# Todos os testes
make test

# Apenas testes unit√°rios
make test-unit

# Apenas testes de integra√ß√£o
make test-integration

# Testes com cobertura
make test-cov
```

### Estrutura de Testes

- `tests/test_data.py` - Testes do m√≥dulo de dados
- `tests/test_api.py` - Testes da API
- `tests/conftest.py` - Configura√ß√µes e fixtures

### Cobertura

O projeto mant√©m alta cobertura de testes:
- Testes unit√°rios para todos os m√≥dulos
- Testes de integra√ß√£o para a API
- Testes de valida√ß√£o de dados
- Testes de performance

## üê≥ Docker

### Desenvolvimento

```bash
# Ambiente de desenvolvimento
docker-compose --profile dev up -d
```

### Produ√ß√£o

```bash
# Build da imagem
docker build -t decision-ai:latest .

# Execu√ß√£o
docker-compose up -d

# Com nginx (produ√ß√£o)
docker-compose --profile production up -d
```

### Comandos √öteis

```bash
# Ver logs
make docker-logs

# Parar containers
make docker-stop

# Limpeza completa
make docker-clean
```

## üöÄ Deploy

### Deploy Local

1. **Prepara√ß√£o**:
   ```bash
   make setup
   make train
   ```

2. **Execu√ß√£o**:
   ```bash
   make api-prod
   ```

### Deploy em Nuvem

#### AWS ECS Fargate

1. **Build e Push da Imagem**:
   ```bash
   # Build
   docker build -t decision-ai:latest .
   
   # Tag para ECR
   docker tag decision-ai:latest <account-id>.dkr.ecr.<region>.amazonaws.com/decision-ai:latest
   
   # Push
   docker push <account-id>.dkr.ecr.<region>.amazonaws.com/decision-ai:latest
   ```

2. **Configura√ß√£o ECS**:
   - Criar cluster ECS
   - Definir task definition com a imagem
   - Configurar service com load balancer
   - Definir vari√°veis de ambiente

3. **Vari√°veis de Ambiente**:
   ```bash
   API_HOST=0.0.0.0
   API_PORT=8000
   MODEL_PATH=models/model.joblib
   LOG_LEVEL=INFO
   ```

#### Google Cloud Run

1. **Deploy**:
   ```bash
   # Build e deploy
   gcloud run deploy decision-ai \
     --source . \
     --platform managed \
     --region us-central1 \
     --allow-unauthenticated
   ```

2. **Configura√ß√£o**:
   - Configurar vari√°veis de ambiente
   - Ajustar recursos (CPU/Memory)
   - Configurar dom√≠nio customizado

### Monitoramento em Produ√ß√£o

- Configure alertas para health checks
- Monitore m√©tricas de drift
- Configure backup dos logs
- Implemente rota√ß√£o de logs

## üìÅ Estrutura do Projeto

```
tech-challenger-5/
‚îú‚îÄ‚îÄ src/                    # C√≥digo fonte principal
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ data.py            # Gera√ß√£o e carregamento de dados
‚îÇ   ‚îú‚îÄ‚îÄ features.py        # Engenharia de features
‚îÇ   ‚îú‚îÄ‚îÄ schema.py          # Schemas Pydantic
‚îÇ   ‚îî‚îÄ‚îÄ train.py           # Pipeline de treinamento
‚îú‚îÄ‚îÄ app/                   # Aplica√ß√£o FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ main.py           # API principal
‚îú‚îÄ‚îÄ monitor/               # Monitoramento de drift
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ generate_report.py # Gera√ß√£o de relat√≥rios
‚îú‚îÄ‚îÄ tests/                 # Testes automatizados
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py       # Configura√ß√µes pytest
‚îÇ   ‚îú‚îÄ‚îÄ test_data.py      # Testes do m√≥dulo de dados
‚îÇ   ‚îî‚îÄ‚îÄ test_api.py       # Testes da API
‚îú‚îÄ‚îÄ data/                  # Dados de treinamento
‚îÇ   ‚îú‚îÄ‚îÄ applicants.json    # Candidatos reais (n√£o versionado)
‚îÇ   ‚îú‚îÄ‚îÄ prospects.json     # Hist√≥rico de processos (n√£o versionado)
‚îÇ   ‚îú‚îÄ‚îÄ jobs.json         # Vagas reais (n√£o versionado)
‚îÇ   ‚îú‚îÄ‚îÄ sample_candidates.csv # Dados sint√©ticos de fallback
‚îÇ   ‚îî‚îÄ‚îÄ sample_payload.json   # Exemplo de payload para API
‚îú‚îÄ‚îÄ models/                # Modelos treinados
‚îÇ   ‚îú‚îÄ‚îÄ model.joblib
‚îÇ   ‚îî‚îÄ‚îÄ training_metadata.json
‚îú‚îÄ‚îÄ logs/                  # Logs da aplica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ api.log
‚îÇ   ‚îî‚îÄ‚îÄ predictions.csv
‚îú‚îÄ‚îÄ reports/               # Relat√≥rios de drift
‚îÇ   ‚îî‚îÄ‚îÄ drift.html
‚îú‚îÄ‚îÄ Dockerfile             # Configura√ß√£o Docker
‚îú‚îÄ‚îÄ docker-compose.yml     # Orquestra√ß√£o Docker
‚îú‚îÄ‚îÄ Makefile              # Comandos de automa√ß√£o
‚îú‚îÄ‚îÄ requirements.txt       # Depend√™ncias Python
‚îú‚îÄ‚îÄ pyproject.toml        # Configura√ß√£o do projeto
‚îú‚îÄ‚îÄ .env.example          # Vari√°veis de ambiente
‚îú‚îÄ‚îÄ postman_collection.json # Cole√ß√£o Postman
‚îî‚îÄ‚îÄ README.md             # Documenta√ß√£o
```

## üé• V√≠deo Demonstrativo
[V√≠deo Demonstrativo](inserir URL aqui)

## ü§ù Contribui√ß√£o

### Desenvolvimento

1. **Setup do ambiente**:
   ```bash
   make dev-setup
   ```

2. **Verifica√ß√µes de qualidade**:
   ```bash
   make dev-check  # Formatar, lint, type-check e testes
   ```

3. **Workflow de desenvolvimento**:
   ```bash
   # Fazer altera√ß√µes
   make format     # Formatar c√≥digo
   make lint       # Verificar linting
   make test       # Executar testes
   ```

### Padr√µes de C√≥digo

- **Formata√ß√£o**: Black com linha de 88 caracteres
- **Linting**: Ruff com regras rigorosas
- **Type Hints**: Obrigat√≥rio em todas as fun√ß√µes
- **Docstrings**: Documenta√ß√£o completa
- **Testes**: Cobertura m√≠nima de 80%

### Estrutura de Commits

```
type(scope): description

feat(api): add new prediction endpoint
fix(model): resolve training convergence issue
docs(readme): update installation instructions
test(api): add integration tests for health endpoint
```

## üìÑ Licen√ßa

Este projeto est√° licenciado sob a MIT License - veja o arquivo [LICENSE](LICENSE) para detalhes.
Desenvolvido para o curso MLE Turma 4 - FIAP

---

**Estudantes**: Rodrigo Matheus da Silva (rodrigorizando@gmail.com) e Vitor Efig√™nio Neto (vitorefigenio@gmail.com)